
### uptime命令
```shell
root@9-134-239-95:~# uptime
 22:52:30 up 265 days, 12:54,  1 user,  load average: 0.03, 0.06, 0.05
```
命令返回：
- `22:52:30`  表示当前时间
- `up 265 days, 12:54`  表示系统运行时间
- `1 user`  表示系统正在登录的用户数
- `load average: 0.03, 0.06, 0.05`  表示过去1分钟、5分钟、15分钟的平均负载

### 平均负载
平均负载是指单位时间内，系统处于可运行状态和不可中断状态的平均进程数，也就是平均活跃进程数，它和 CPU 使用率并没有直接关系。
- 可运行状态的进程：是指正在使用 CPU 或者正在等待 CPU 的进程，也就是我们常用 ps 命令看到的，处于 R 状态（Running 或 Runnable）的进程。
- 不可中断状态的进程则是正处于内核态关键流程中的进程，并且这些流程是不可打断的，比如最常见的是等待硬件设备的 I/O 响应，也就是我们在 ps 命令中看到的 D 状态（Uninterruptible Sleep，也称为 Disk Sleep）的进程。

小总结：平均负载就是平均活跃进程数。那么最理想的情况是一个CPU运行一个进程，CPU被充分利用。比如平均负载为2，在1个CPU的机器上，意味着一半进程竞争不到CPU；在2个CPU的机器上，意味着所有CPU刚好被完全占有；在4个CPU的机器上，意味着CPU有50%的空闲。
- 如果最近1分钟、5分钟、15分钟的三个值基本相同，那就说明负载很平稳
- 如果最近1分钟远小于15分钟的值，说明最近1分钟的负载在降低，过去15分钟的负载稍高
- 如果最近1分钟远大于15分钟的值，说明负载在增加，如果平均负载接近或者超过CPU个数，意味着系统正在发生过载

一般情况下，当平均负载超过CPU数量的70%时，就需要关注负载高的问题；一旦负载高，会导致进程响应变慢，进而影响服务的正常功能

### 区分平均负载和CPU使用率
平均负载：单位时间内，系统处于可运行状态和不可中断状态的平均进程数；所以，它不仅包括了正在使用 CPU 的进程，还包括等待 CPU 和等待 I/O 的进程。
CPU使用率：单位时间内，CPU的繁忙情况统计，和平均负载不一定完全对应

比如如下情况：
1. CPU密集型进程，使用大量CPU会使平均负载升高，此时两者是一致的
2. I/O密集型进程，等待I/O会导致平均负载升高，但CPU使用率不一定很高
3. 大量等待CPU的进程调度也会导致平均负载升高，此时CPU的使用率也会比较高

