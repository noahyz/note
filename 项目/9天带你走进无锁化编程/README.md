产出计划标题：9天带你走近无锁化编程

计划学习时长：9天

适应人员：对于 C++11 有一定了解

### 第一天：对于线程安全的理解

计划学习时长：30 分钟

需要掌握的知识点：

- 掌握为什么需要并发编程？
- 并发和并行的区别？
- 线程安全，保障的是线程那些资源的安全？
- 线程同步的概念和意义
- 锁如何保证线程安全
- 一般如何实现无锁来保证线程安全

练习时间：2 小时

- 模拟实现一个线程不安全的场景
- 使用锁来对线程不安全的代码进行保护
- 了解不同种类的锁：互斥锁、自旋锁、读写锁等，熟悉他们的使用，掌握他们的原理
- 了解死锁的形成，以及解决死锁的方案

### 第二天：对于原子操作的理解

计划学习时长：30 分钟

需要掌握的知识点：

- 原子操作的含义
- CAS 的含义，以及 C++11 中实现 CAS 的方式
- compare_exchange_weak 和 compare_exchange_strong 的区别，以及优缺点
- C++ 中的原子操作 atomic 的使用

练习时间：2 小时

- 模拟在多线程非原子操作会造成的问题，然后使用原子操作进行优化
- 学习使用 atomic 中的各个 API，包括 `atomic_flag`、`atomic_bool`、`atomic_指针类型`、`atomic_整形类型`

### 第三天：对于内存模型的理解

计划学习时长：2 小时

需要掌握的知识点：

- 为什么要有内存模型？
- 内存重排的概念以及原理
- 编译器的优化会导致什么问题
- 了解 CPU 的 out-of-order 
- 了解 CPU 的多级缓存
- 掌握内存模型之 seq-cst 模型、acq-rel 模型、relaxed 模型的概念
- 不同内存模型之间的区别，优缺点
- 如何选择内存模型

练习时间：2 小时

- 分别模拟实现  seq-cst 模型、acq-rel 模型、relaxed 模型三种内存模型可能会导致的问题
- 对于这些问题，尝试改进解决这些问题
- 测试验证这三种内存模型的性能

### 第四天：对于内存屏障和ABA问题的理解

计划学习时长：30 分钟

需要掌握的知识点：

- 内存屏障的概念
- ABA 问题的概念

练习时间：1 小时

- 模拟实现没有内存屏障的代码会导致什么问题
- 在恰当的位置加上内存屏障，解决出现的问题
- 使用 atomic 模拟实现可能发生的 ABA 问题

### 第五天：研读 C++ 语言 boost 库中无锁队列的实现

计划学习时长：2 小时

需要掌握的知识点：

- boost 库中 lockfree.queue 的实现原理
- 熟悉掌握第一点

练习时间：2 小时

- 使用 boost 库中 lockfree.queue 组件，写一个demo
- 测试  boost 库中 lockfree.queue 组件的性能，和加互斥锁的方式进行比较

### 第六天：研读 Go 语言 channel 的实现

计划学习时长：2 小时

需要掌握的知识点：

- Go 语言中 channel 的实现原理
- 熟悉掌握第一点

练习时间：2 小时

针对会 Go 语言的同学，不会 Go 语言掌握原理即可

- 使用 channel，写一个 demo
- 测试 Go 语言的 channel 和 Go 语言的 mutex 的性能，两者进行比较

### 第七天：研读 Java 语言中线程安全队列的实现

计划学习时长：2 小时

需要掌握的知识点：

- 掌握 Java 中加锁和无锁两种方式实现的线程安全队列原理
- 熟悉掌握第一点

练习时间：2小时

针对会 Java 语言的同学，不会 Java 语言掌握原理即可

- 使用 ArrayBlockingQueue 和 ConcurrentLinkedQueue ，写一个 demo
- 测试这两种组件在不同场景下的性能

### 第八天：实现一个无锁的线程安全队列

计划学习时长：3 小时

需要掌握的知识点：

- 为什么选择 2 的幂作为数组、哈希表等缓存型数据结构的大小？
- 如何实现求一个数的最小 2 的幂
- 如何实现一个环形队列
- C++ 的 `placement new `操作的理解
- 如何实现一个无锁的线程安全队列

练习时间：5 小时

- 自己动手实现一个无锁的线程安全队列
- 自动动手实现一个以链表为底层数据结构的无锁线程安全队列
- 测试自己实现的无锁的线程安全队列的性能

### 第九天：思考与展望

计划学习时长：1 小时

需要掌握的知识点：

- 无锁队列和有锁队列的理解

练习时间：2 小时

- 总结过去学过的知识点
- 可以把推荐读物看一看